{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useParams}from'react-router-dom';import Navbar from'../mainPage/Navbar';import Accordion from'./Accordion';import Loader from'../loader/Loader';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Restaurant(){const{id}=useParams();const[headerData,setheaderData]=useState('');const[menuData,setMenuData]=useState([]);const[footerData,setfooterData]=useState('');const[loader,setLoader]=useState(true);useEffect(()=>{fetchData();});const fetchData=async()=>{try{var _json$data,_headerFinder$card,_headerFinder$card$ca,_menuFinder$groupedCa,_menuFinder$groupedCa2,_menuFinder$groupedCa3,_menu,_menu$card,_menu2,_menu2$card;const url=\"https://www.swiggy.com/dapi/menu/pl?page-type=REGULAR_MENU&complete-menu=true&lat=26.8947446&lng=75.8301169&restaurantId=\".concat(id,\"&catalog_qa=undefined&submitAction=ENTER\");const main_url=\"https://thingproxy-760k.onrender.com/fetch/\"+url;const response=await fetch(main_url);const json=await response.json();if(json)setLoader(false);const data=json===null||json===void 0?void 0:(_json$data=json.data)===null||_json$data===void 0?void 0:_json$data.cards;const headerFinder=data.find(card=>card.card&&card.card.card&&card.card.card[\"@type\"]===\"type.googleapis.com/swiggy.presentation.food.v2.Restaurant\");const header=headerFinder===null||headerFinder===void 0?void 0:(_headerFinder$card=headerFinder.card)===null||_headerFinder$card===void 0?void 0:(_headerFinder$card$ca=_headerFinder$card.card)===null||_headerFinder$card$ca===void 0?void 0:_headerFinder$card$ca.info;const menuFinder=data.find(card=>\"groupedCard\"in card);const menu=(_menuFinder$groupedCa=menuFinder.groupedCard)===null||_menuFinder$groupedCa===void 0?void 0:(_menuFinder$groupedCa2=_menuFinder$groupedCa.cardGroupMap)===null||_menuFinder$groupedCa2===void 0?void 0:(_menuFinder$groupedCa3=_menuFinder$groupedCa2.REGULAR)===null||_menuFinder$groupedCa3===void 0?void 0:_menuFinder$groupedCa3.cards;const{imageId,text}=((_menu=menu[menu.length-2])===null||_menu===void 0?void 0:(_menu$card=_menu.card)===null||_menu$card===void 0?void 0:_menu$card.card)||{};const{name,area,completeAddress}=((_menu2=menu[menu.length-1])===null||_menu2===void 0?void 0:(_menu2$card=_menu2.card)===null||_menu2$card===void 0?void 0:_menu2$card.card)||{};const footer={imageId,text,name,area,completeAddress};setheaderData(header||{});setMenuData(menu||{});setfooterData(footer||{});}catch(error){console.log('Error occured in fetching data: ',error);}};return/*#__PURE__*/_jsx(_Fragment,{children:loader?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Loader,{})}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col items-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-[50%] pt-36\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl  font-bold\",children:headerData.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-4 \".concat(headerData.isOpen?'border-orange-400':'border-black',\"  my-8 rounded-md p-2\"),children:[/*#__PURE__*/_jsx(\"div\",{children:headerData.avgRating}),/*#__PURE__*/_jsx(\"div\",{children:headerData.veg?'veg':'non-veg'}),/*#__PURE__*/_jsx(\"div\",{children:headerData.locality}),/*#__PURE__*/_jsx(\"div\",{children:headerData.cuisines}),/*#__PURE__*/_jsx(\"div\",{children:headerData.costForTwoMessage})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mx-[45%] mb-5 font-bold text-2xl\",children:\"MENU\"}),menuData.map((item,index)=>{var _item$card;const card=(_item$card=item.card)===null||_item$card===void 0?void 0:_item$card.card;if(!(card!==null&&card!==void 0&&card.title))return null;if(card!==null&&card!==void 0&&card.itemCards){return/*#__PURE__*/_jsx(Accordion,{index:index,data:card,resturantId:id,restaurantData:{name:headerData.name,area:headerData.locality,cuisines:headerData.cuisines}},index);}return null;}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col border-4 border-black bg-gray-300 mt-10\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-bold text-2xl\",children:\"Footer\"}),/*#__PURE__*/_jsx(\"div\",{children:footerData.area}),/*#__PURE__*/_jsx(\"div\",{children:footerData.completeAddress}),/*#__PURE__*/_jsx(\"div\",{children:footerData.text}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{})]})]})})]})});}export default Restaurant;","map":{"version":3,"names":["React","useEffect","useState","useParams","Navbar","Accordion","Loader","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Restaurant","id","headerData","setheaderData","menuData","setMenuData","footerData","setfooterData","loader","setLoader","fetchData","_json$data","_headerFinder$card","_headerFinder$card$ca","_menuFinder$groupedCa","_menuFinder$groupedCa2","_menuFinder$groupedCa3","_menu","_menu$card","_menu2","_menu2$card","url","concat","main_url","response","fetch","json","data","cards","headerFinder","find","card","header","info","menuFinder","menu","groupedCard","cardGroupMap","REGULAR","imageId","text","length","name","area","completeAddress","footer","error","console","log","children","className","isOpen","avgRating","veg","locality","cuisines","costForTwoMessage","map","item","index","_item$card","title","itemCards","resturantId","restaurantData"],"sources":["E:/mostlySwiggy/frontend/src/Components/restaurantPage/Restaurant.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { useParams } from 'react-router-dom'\r\nimport Navbar from '../mainPage/Navbar';\r\nimport Accordion from './Accordion';\r\nimport Loader from '../loader/Loader';\r\n\r\nfunction Restaurant() {\r\n  const {id} = useParams();\r\n  const[headerData, setheaderData] = useState('');\r\n  const[menuData, setMenuData] = useState([]);\r\n  const[footerData, setfooterData] = useState('');\r\n  const[loader, setLoader] = useState(true);\r\n\r\n  useEffect(()=>{\r\n    fetchData();\r\n  })\r\n\r\n  const fetchData = async () =>{\r\n    try{\r\n      const url = `https://www.swiggy.com/dapi/menu/pl?page-type=REGULAR_MENU&complete-menu=true&lat=26.8947446&lng=75.8301169&restaurantId=${id}&catalog_qa=undefined&submitAction=ENTER`;\r\n      const main_url = \"https://thingproxy-760k.onrender.com/fetch/\" + url;\r\n      const response = await fetch(main_url);\r\n      const json = await response.json();\r\n      if(json) setLoader(false);\r\n      const data = json?.data?.cards;\r\n      const headerFinder = data.find(\r\n        (card) =>\r\n            card.card &&\r\n            card.card.card &&\r\n            card.card.card[\"@type\"] ===\r\n                \"type.googleapis.com/swiggy.presentation.food.v2.Restaurant\",\r\n      );\r\n      const header = headerFinder?.card?.card?.info;\r\n      const menuFinder = data.find((card) => \"groupedCard\" in card);\r\n      const menu = menuFinder.groupedCard?.cardGroupMap?.REGULAR?.cards;\r\n      const { imageId, text } = menu[menu.length - 2]?.card?.card || {};\r\n      const { name, area, completeAddress } = menu[menu.length - 1]?.card?.card || {};\r\n      const footer = { imageId, text, name, area, completeAddress };\r\n      \r\n      setheaderData(header || {});\r\n      setMenuData(menu || {});\r\n      setfooterData(footer || {});\r\n\r\n    }\r\n    catch(error){\r\n      console.log('Error occured in fetching data: ',error);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n        {\r\n          loader \r\n          ?\r\n          <div>\r\n              <Loader/>\r\n          </div>\r\n          :\r\n          <div>\r\n          <Navbar/>\r\n          <div className='flex flex-col items-center'>\r\n            <div className='w-[50%] pt-36'>\r\n              <div className='text-3xl  font-bold'>{headerData.name}</div>\r\n              <div className={`border-4 ${headerData.isOpen ? 'border-orange-400' : 'border-black'}  my-8 rounded-md p-2`}>\r\n                <div>{headerData.avgRating}</div>\r\n                <div>{headerData.veg ? 'veg' : 'non-veg'}</div>\r\n                <div>{headerData.locality}</div>\r\n                <div>{headerData.cuisines}</div>\r\n                <div>{headerData.costForTwoMessage}</div>\r\n              </div>\r\n              <div className='mx-[45%] mb-5 font-bold text-2xl'>MENU</div>\r\n              {\r\n                menuData.map((item, index)=>{\r\n                  const card = item.card?.card;\r\n                  if(!card?.title) return null;\r\n                  if(card?.itemCards){\r\n                      return(\r\n                          <Accordion\r\n                              key={index}\r\n                              index={index}\r\n                              data={card}\r\n                              resturantId = {id}\r\n                              restaurantData={{\r\n                                  name : headerData.name,\r\n                                  area : headerData.locality,\r\n                                  cuisines : headerData.cuisines,\r\n                              }}\r\n                          />\r\n                      );\r\n                  }\r\n                  return null;\r\n                })\r\n              \r\n              }\r\n            <div className='flex flex-col border-4 border-black bg-gray-300 mt-10'>\r\n              <span className='font-bold text-2xl'>Footer</span>\r\n              <div>{footerData.area}</div>\r\n              <div>{footerData.completeAddress}</div>\r\n              <div>{footerData.text}</div>\r\n              <div></div>\r\n              <div></div>\r\n            </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        }\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Restaurant"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}