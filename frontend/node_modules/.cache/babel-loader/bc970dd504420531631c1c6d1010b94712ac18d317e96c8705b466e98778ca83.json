{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{setCartSlice,removeCartSlice}from\"../../Redux/slices/CartSlice\";import{toast}from\"sonner\";// Add the inStock effect also\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function AccordionItem(_ref){let{dishData,resturantId,restaurantData}=_ref;const[cartItems,setCartItems]=useState(new Map());const cartyy=useSelector(state=>state.CartSlice);useEffect(()=>{const mapItems=new Map();cartyy.map(item=>mapItems.set(item.data.dishName,item.quantity));setCartItems(mapItems);},[cartyy]);const dispatch=useDispatch();const cart={dishName:dishData.name,dishPrice:dishData.finalPrice,dishVeg:dishData.isVeg,dishImage:dishData.imageId,resId:resturantId,resName:restaurantData.name};const removeFromCart=()=>{dispatch(removeCartSlice(cart));};const sendToCart=()=>{dispatch(setCartSlice(cart));toast.success(\"Item added to cart!\",{style:{background:\"lightgreen\",fontSize:\"17px\"}});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between my-3 border border-black\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"div\",{children:dishData.isVeg}),/*#__PURE__*/_jsx(\"div\",{children:dishData.name}),/*#__PURE__*/_jsx(\"div\",{children:dishData.finalPrice}),/*#__PURE__*/_jsx(\"div\",{children:dishData.ratings.aggregatedRating.rating}),/*#__PURE__*/_jsx(\"div\",{children:dishData.ratings.aggregatedRating.ratingCount})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{alt:\"dishImage\",className:\"w-20 h-20\",src:\"https://media-assets.swiggy.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_660/\".concat(dishData.imageId)})}),cartItems.size!==0&&cartItems.get(dishData.name)!==undefined?/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between space-x-5\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:sendToCart,children:\"+\"}),/*#__PURE__*/_jsx(\"div\",{children:cartItems.get(dishData.name)}),/*#__PURE__*/_jsx(\"button\",{onClick:removeFromCart,children:\"-\"})]}):/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:sendToCart,children:\"ADD\"})})]})]})});}export default AccordionItem;","map":{"version":3,"names":["React","useEffect","useState","useDispatch","useSelector","setCartSlice","removeCartSlice","toast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AccordionItem","_ref","dishData","resturantId","restaurantData","cartItems","setCartItems","Map","cartyy","state","CartSlice","mapItems","map","item","set","data","dishName","quantity","dispatch","cart","name","dishPrice","finalPrice","dishVeg","isVeg","dishImage","imageId","resId","resName","removeFromCart","sendToCart","success","style","background","fontSize","children","className","ratings","aggregatedRating","rating","ratingCount","alt","src","concat","size","get","undefined","onClick","type"],"sources":["E:/mostlySwiggy/frontend/src/Components/restaurantPage/AccordionItem.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector} from \"react-redux\";\r\nimport { setCartSlice, removeCartSlice } from \"../../Redux/slices/CartSlice\";\r\nimport { toast } from \"sonner\";\r\n\r\n// Add the inStock effect also\r\nfunction AccordionItem({ dishData, resturantId, restaurantData }) {\r\n  const [cartItems, setCartItems] = useState(new Map());\r\n  const cartyy = useSelector((state) => state.CartSlice);\r\n\r\n  useEffect(()=>{\r\n    const mapItems = new Map();\r\n    cartyy.map((item)=> mapItems.set(item.data.dishName, item.quantity));\r\n    setCartItems(mapItems);\r\n  },[cartyy])\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const cart = {\r\n    dishName: dishData.name,\r\n    dishPrice: dishData.finalPrice,\r\n    dishVeg: dishData.isVeg,\r\n    dishImage: dishData.imageId,\r\n    resId: resturantId,\r\n    resName: restaurantData.name,\r\n  };\r\n\r\n  const removeFromCart = () =>{\r\n    dispatch(removeCartSlice(cart));\r\n  }\r\n\r\n  const sendToCart = () => {\r\n    dispatch(setCartSlice(cart));\r\n    toast.success(\"Item added to cart!\", {\r\n      style: { background: \"lightgreen\", fontSize: \"17px\" },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"flex justify-between my-3 border border-black\">\r\n        <div className=\"flex flex-col\">\r\n          <div>{dishData.isVeg}</div>\r\n          <div>{dishData.name}</div>\r\n          <div>{dishData.finalPrice}</div>\r\n          <div>{dishData.ratings.aggregatedRating.rating}</div>\r\n          <div>{dishData.ratings.aggregatedRating.ratingCount}</div>\r\n        </div>\r\n        <div className=\"flex flex-col items-center\">\r\n          <div>\r\n            <img\r\n              alt=\"dishImage\"\r\n              className=\"w-20 h-20\"\r\n              src={`https://media-assets.swiggy.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_660/${dishData.imageId}`}\r\n            />\r\n          </div>\r\n          {cartItems.size !== 0 && cartItems.get(dishData.name) !== undefined ? (\r\n            <div className=\"flex justify-between space-x-5\">\r\n              <button onClick={sendToCart}>+</button>\r\n              <div>{cartItems.get(dishData.name)}</div>\r\n              <button onClick={removeFromCart}>-</button>\r\n            </div>\r\n          ) : (\r\n            <div>\r\n              <button  type=\"button\" onClick={sendToCart}>\r\n                ADD\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default AccordionItem;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}